class ChartCtrl{constructor(t){switch(t){case"barchart":this.chartType="bar";break;case"piechart":this.chartType="pie";break;case"doughnutchart":this.chartType="doughnut";break;case"polarareachart":this.chartType="polarArea";break;case"radarchart":this.chartType="radar";break;default:this.chartType="bar"}this.chart=null}initChart(t){var a=document.getElementById("livepoll-chart").getContext("2d"),e=[],r=[];t.forEach(t=>{e.push(t.title),r.push(0)}),this.chart=new window.Chart(a,{type:this.chartType,data:{labels:e,datasets:[{label:"Votes",data:r,backgroundColor:["#ff6384","#36a2eb","#cc65fe","#ffce56"]}]},options:this.getChartOptions()})}performUpdate(t){this.chart||this.initChart(t),this.chart.data.datasets[0].data=[],t.forEach(t=>{this.chart.data.datasets[0].data.push(t.voteCnt)}),this.chart.update()}getChartOptions(){switch(this.chartType){case"bar":return{legend:{display:!1},scales:{xAxes:[{display:!0,gridLines:{color:"rgba(255, 255, 255, 0.25)",zeroLineColor:"rgba(255, 255, 255, 0.25)"}}],yAxes:[{display:!0,gridLines:{color:"rgba(255, 255, 255, 0.25)"},scaleLabel:{display:!1,fontColor:"rgba(255, 255, 255, 0.25)"},ticks:{display:!1}}]},animation:{onComplete:function(){var a=this.chart,r=a.ctx;r.font=window.Chart.helpers.fontString("18","bold",window.Chart.defaults.global.defaultFontFamily),r.fillStyle="rgb(0, 0, 0)",r.textAlign="center",r.textBaseline="bottom",this.data.datasets.forEach(function(e,t){a.controller.getDatasetMeta(t).data.forEach(function(t,a){a=e.data[a];0!=a&&r.fillText(a,t._model.x,t._model.y+25)})})}}};case"pie":case"doughnut":case"polarArea":case"radar":return{..."polarArea"===this.chartType?{scale:{ticks:{display:!1}}}:{},legend:{position:"right"},animation:{onComplete:function(){const a=this.chart.ctx;a.font=window.Chart.helpers.fontString("18","bold",window.Chart.defaults.global.defaultFontFamily),a.fillStyle="rgb(0, 0, 0)",a.textAlign="center",a.textBaseline="center";var e=this.data.datasets[0];for(let t=0;t<e.data.length;t++){var r=e._meta[Object.keys(e._meta)[0]].data[t]._model,s=r.innerRadius+(r.outerRadius-r.innerRadius)/1.5,i=r.startAngle,i=i+(r.endAngle-i)/2,l=s*Math.cos(i),s=s*Math.sin(i);a.fillStyle="black",0!==e.data[t]&&(a.font="bold 18px Arial",i=e.data[t],a.fillText(i,r.x+l,r.y+s)),0}}}}}}}
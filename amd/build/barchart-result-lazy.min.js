/**
 * Live poll barchart result for poll rendering.
 *
 * @copyright Copyright (c) 2018 Open LMS
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_livepoll/barchart-result-lazy",["jquery","core/log","mod_livepoll/result","core/chartjs-lazy"],(function($,Log,Result,Chart){function BarChartResult(){return Result.call(this),this._initialized=!1,this._chartType="bar",this._options={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},this}return BarChartResult.prototype=Object.create(Result.prototype),BarChartResult.prototype.initChart=function(options){var ctx=document.getElementById("livepoll-chart").getContext("2d"),labels=[],votes=[];$.each(options,(function(optionid,label){labels.push(label),votes.push(0)})),this._chart=new Chart(ctx,{type:this._chartType,data:{labels:labels,datasets:[{label:"Votes",data:votes,backgroundColor:["#ff6384","#36a2eb","#cc65fe","#ffce56"]}]},options:this._options}),Log.debug(this._chartType+" initialized!")},BarChartResult.prototype.performUpdate=function(options,votes,callback){var self=this;self._initialized||(self.initChart(options),self._initialized=!0),self._chart.data.datasets[0].data=[],$.each(options,(function(optionid){self._chart.data.datasets[0].data.push(votes[optionid])})),self._chart.update(),callback()},BarChartResult}));

//# sourceMappingURL=barchart-result-lazy.min.js.map